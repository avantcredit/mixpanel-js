(function(e){function W(){if(W.done){return}W.done=true;_=true;L=false;A.each(U,function(e){e._dom_loaded()})}var t=Array.prototype,n=Function.prototype,r=Object.prototype,i=t.slice,s=r.toString,o=r.hasOwnProperty,u=window.console,a=window.navigator,f=window.document,l=a.userAgent;var c="mixpanel",h="__mps",p="__mpso",d="__mpa",v="__mpap",m="$set",g="$set_once",y="$add",b="$append",w="$people_distinct_id",E="__alias",S="__cmpns",x=[h,p,d,v,w,E,S];var T="https:"==f.location.protocol?"https://":"http://",N="2.3.1",C=e&&e["__SV"]||0,k=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,L=!k&&l.indexOf("MSIE")==-1&&l.indexOf("Mozilla")==-1;var A={},O=false,M={api_host:T+"api.mixpanel.com",cross_subdomain_cookie:true,cookie_name:"",loaded:function(){},store_google:true,save_referrer:true,test:false,verbose:false,img:false,track_pageview:true,debug:false,track_links_timeout:300,cookie_expiration:365,upgrade:false,disable_cookie:false,secure_cookie:false,ip:true},_=false;(function(){var e=n.bind,r=t.forEach,u=t.indexOf,a=Array.isArray,f={};A.bind=function(t,n){var r,s;if(e&&t.bind===e)return e.apply(t,i.call(arguments,1));if(!A.isFunction(t))throw new TypeError;r=i.call(arguments,2);return s=function(){if(!(this instanceof s))return t.apply(n,r.concat(i.call(arguments)));ctor.prototype=t.prototype;var e=new ctor;ctor.prototype=null;var o=t.apply(e,r.concat(i.call(arguments)));if(Object(o)===o)return o;return e}};A.bind_instance_methods=function(e){for(var t in e){if(typeof e[t]==="function"){e[t]=A.bind(e[t],e)}}};var l=A.each=function(e,t,n){if(e==null)return;if(r&&e.forEach===r){e.forEach(t,n)}else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++){if(i in e&&t.call(n,e[i],i,e)===f)return}}else{for(var u in e){if(o.call(e,u)){if(t.call(n,e[u],u,e)===f)return}}}};A.escapeHTML=function(e){var t=e;if(t&&A.isString(t)){t=t.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}return t};A.extend=function(e){l(i.call(arguments,1),function(t){for(var n in t){if(t[n]!==void 0)e[n]=t[n]}});return e};A.isArray=a||function(e){return s.call(e)==="[object Array]"};A.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(t){return false}};A.isArguments=function(e){return!!(e&&o.call(e,"callee"))};A.toArray=function(e){if(!e)return[];if(e.toArray)return e.toArray();if(A.isArray(e))return i.call(e);if(A.isArguments(e))return i.call(e);return A.values(e)};A.values=function(e){var t=[];if(e==null)return t;l(e,function(e){t[t.length]=e});return t};A.identity=function(e){return e};A.include=function(e,t){var n=false;if(e==null)return n;if(u&&e.indexOf===u)return e.indexOf(t)!=-1;l(e,function(e){if(n||(n=e===t)){return f}});return n};A.includes=function(e,t){return e.indexOf(t)!==-1}})();A.inherit=function(e,t){e.prototype=new t;e.prototype.constructor=e;e.superclass=t.prototype;return e};A.isObject=function(e){return e===Object(e)&&!A.isArray(e)};A.isEmptyObject=function(e){if(A.isObject(e)){for(var t in e){if(o.call(e,t)){return false}}return true}return false};A.isUndefined=function(e){return e===void 0};A.isString=function(e){return s.call(e)=="[object String]"};A.isDate=function(e){return s.call(e)=="[object Date]"};A.isNumber=function(e){return s.call(e)=="[object Number]"};A.encodeDates=function(e){A.each(e,function(t,n){if(A.isDate(t)){e[n]=A.formatDate(t)}else if(A.isObject(t)){e[n]=A.encodeDates(t)}});return e};A.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())};A.safewrap=function(e){return function(){try{e.apply(this,arguments)}catch(t){D.critical("Implementation error. Please contact support@mixpanel.com.")}}};A.safewrap_class=function(e,t){for(var n=0;n<t.length;n++){e.prototype[t[n]]=A.safewrap(e.prototype[t[n]])}};A.strip_empty_properties=function(e){var t={};A.each(e,function(e,n){if(A.isString(e)&&e.length>0){t[n]=e}});return t};A.truncate=function(e,t){var n;if(typeof e==="string"){n=e.slice(0,t)}else if(A.isArray(e)){n=[];A.each(e,function(e){n.push(A.truncate(e,t))})}else if(A.isObject(e)){n={};A.each(e,function(e,r){n[r]=A.truncate(e,t)})}else{n=e}return n};A.JSONEncode=function(){return function(e){var t;var n=e;var r;var i=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.lastIndex=0;return t.test(e)?'"'+e.replace(t,function(e){var t=n[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};var u=function(e,t){var n="";var r="    ";var a=0;var f="";var l="";var c=0;var h=n;var p=[];var d=t[e];if(d&&typeof d==="object"&&typeof d.toJSON==="function"){d=d.toJSON(e)}switch(typeof d){case"string":return i(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d){return"null"}n+=r;p=[];if(s.apply(d)==="[object Array]"){c=d.length;for(a=0;a<c;a+=1){p[a]=u(a,d)||"null"}l=p.length===0?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+h+"]":"["+p.join(",")+"]";n=h;return l}for(f in d){if(o.call(d,f)){l=u(f,d);if(l){p.push(i(f)+(n?": ":":")+l)}}}l=p.length===0?"{}":n?"{"+p.join(",")+""+h+"}":"{"+p.join(",")+"}";n=h;return l}};return u("",{"":n})}}();A.JSONDecode=function(){var e,t,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},r,i=function(t){throw{name:"SyntaxError",message:t,at:e,text:r}},s=function(n){if(n&&n!==t){i("Expected '"+n+"' instead of '"+t+"'")}t=r.charAt(e);e+=1;return t},o=function(){var e,n="";if(t==="-"){n="-";s("-")}while(t>="0"&&t<="9"){n+=t;s()}if(t==="."){n+=".";while(s()&&t>="0"&&t<="9"){n+=t}}if(t==="e"||t==="E"){n+=t;s();if(t==="-"||t==="+"){n+=t;s()}while(t>="0"&&t<="9"){n+=t;s()}}e=+n;if(!isFinite(e)){i("Bad number")}else{return e}},u=function(){var e,r,o="",u;if(t==='"'){while(s()){if(t==='"'){s();return o}if(t==="\\"){s();if(t==="u"){u=0;for(r=0;r<4;r+=1){e=parseInt(s(),16);if(!isFinite(e)){break}u=u*16+e}o+=String.fromCharCode(u)}else if(typeof n[t]==="string"){o+=n[t]}else{break}}else{o+=t}}}i("Bad string")},a=function(){while(t&&t<=" "){s()}},f=function(){switch(t){case"t":s("t");s("r");s("u");s("e");return true;case"f":s("f");s("a");s("l");s("s");s("e");return false;case"n":s("n");s("u");s("l");s("l");return null}i("Unexpected '"+t+"'")},l,c=function(){var e=[];if(t==="["){s("[");a();if(t==="]"){s("]");return e}while(t){e.push(l());a();if(t==="]"){s("]");return e}s(",");a()}}i("Bad array")},h=function(){var e,n={};if(t==="{"){s("{");a();if(t==="}"){s("}");return n}while(t){e=u();a();s(":");if(Object.hasOwnProperty.call(n,e)){i('Duplicate key "'+e+'"')}n[e]=l();a();if(t==="}"){s("}");return n}s(",");a()}}i("Bad object")};l=function(){a();switch(t){case"{":return h();case"[":return c();case'"':return u();case"-":return o();default:return t>="0"&&t<="9"?o():f()}};return function(n){var s;r=n;e=0;t=" ";s=l();a();if(t){i("Syntax error")}return s}}();A.base64Encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e){return e}e=A.utf8Encode(e);do{n=e.charCodeAt(l++);r=e.charCodeAt(l++);i=e.charCodeAt(l++);f=n<<16|r<<8|i;s=f>>18&63;o=f>>12&63;u=f>>6&63;a=f&63;p[c++]=t.charAt(s)+t.charAt(o)+t.charAt(u)+t.charAt(a)}while(l<e.length);h=p.join("");switch(e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"=";break}return h};A.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t="",n,r;var i=0,s;n=r=0;i=e.length;for(s=0;s<i;s++){var o=e.charCodeAt(s);var u=null;if(o<128){r++}else if(o>127&&o<2048){u=String.fromCharCode(o>>6|192,o&63|128)}else{u=String.fromCharCode(o>>12|224,o>>6&63|128,o&63|128)}if(u!==null){if(r>n){t+=e.substring(n,r)}t+=u;n=r=s+1}}if(r>n){t+=e.substring(n,e.length)}return t};A.UUID=function(){var e=function(){var e=1*new Date,t=0;while(e==1*new Date){t++}return e.toString(16)+t.toString(16)};var t=function(){return Math.random().toString(16).replace(".","")};var n=function(e){function o(e,t){var n,r=0;for(n=0;n<t.length;n++){r|=i[n]<<n*8}return e^r}var t=l,n,r,i=[],s=0;for(n=0;n<t.length;n++){r=t.charCodeAt(n);i.unshift(r&255);if(i.length>=4){s=o(s,i);i=[]}}if(i.length>0){s=o(s,i)}return s.toString(16)};return function(){var r=(screen.height*screen.width).toString(16);return e()+"-"+t()+"-"+n()+"-"+r+"-"+e()}}();A.isBlockedUA=function(e){if(/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)){return true}return false};A.HTTPBuildQuery=function(e,t){var n,r,i,s=[];if(typeof t==="undefined"){t="&"}A.each(e,function(e,t){r=encodeURIComponent(e.toString());i=encodeURIComponent(t);s[s.length]=i+"="+r});return s.join(t)};A.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)",r=new RegExp(n),i=r.exec(e);if(i===null||i&&typeof i[1]!=="string"&&i[1].length){return""}else{return decodeURIComponent(i[1]).replace(/\+/g," ")}};A.cookie={get:function(e){var t=e+"=";var n=f.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=A.JSONDecode(A.cookie.get(e))||{}}catch(n){}return t},set:function(e,t,n,r,i){var s="",o="",u="";if(r){var a=f.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),l=a?a[0]:"";s=l?"; domain=."+l:""}if(n){var c=new Date;c.setTime(c.getTime()+n*24*60*60*1e3);o="; expires="+c.toGMTString()}if(i){u="; secure"}f.cookie=e+"="+encodeURIComponent(t)+o+"; path=/"+s+u},remove:function(e,t){A.cookie.set(e,"",-1,t)}};A.register_event=function(){function t(e,t,r){var i=function(i){i=i||n(window.event);if(!i){return undefined}var s=true;var o,u;if(A.isFunction(r)){o=r(i)}u=t.call(e,i);if(false===o||false===u){s=false}return s};return i}function n(e){if(e){e.preventDefault=n.preventDefault;e.stopPropagation=n.stopPropagation}return e}var e=function(e,n,r,i){if(!e){D.error("No valid element provided to register_event");return}if(e.addEventListener&&!i){e.addEventListener(n,r,false)}else{var s="on"+n;var o=e[s];e[s]=t(e,r,o)}};n.preventDefault=function(){this.returnValue=false};n.stopPropagation=function(){this.cancelBubble=true};return e}();A.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}function n(e,n){var r=" "+n+" ";return(" "+e.className+" ").replace(t," ").indexOf(r)>=0}function r(t){if(!f.getElementsByTagName){return new Array}var r=t.split(" ");var i;var s=new Array(f);for(var o=0;o<r.length;o++){i=r[o].replace(/^\s+/,"").replace(/\s+$/,"");if(i.indexOf("#")>-1){var u=i.split("#");var a=u[0];var l=u[1];var c=f.getElementById(l);if(!c||a&&c.nodeName.toLowerCase()!=a){return new Array}s=new Array(c);continue}if(i.indexOf(".")>-1){var u=i.split(".");var a=u[0];var h=u[1];if(!a){a="*"}var p=new Array;var d=0;for(var v=0;v<s.length;v++){var m;if(a=="*"){m=e(s[v])}else{m=s[v].getElementsByTagName(a)}for(var g=0;g<m.length;g++){p[d++]=m[g]}}s=new Array;var y=0;for(var b=0;b<p.length;b++){if(p[b].className&&A.isString(p[b].className)&&n(p[b],h)){s[y++]=p[b]}}continue}if(i.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var a=RegExp.$1;var w=RegExp.$2;var E=RegExp.$3;var S=RegExp.$4;if(!a){a="*"}var p=new Array;var d=0;for(var v=0;v<s.length;v++){var m;if(a=="*"){m=e(s[v])}else{m=s[v].getElementsByTagName(a)}for(var g=0;g<m.length;g++){p[d++]=m[g]}}s=new Array;var y=0;var x;switch(E){case"=":x=function(e){return e.getAttribute(w)==S};break;case"~":x=function(e){return e.getAttribute(w).match(new RegExp("\\b"+S+"\\b"))};break;case"|":x=function(e){return e.getAttribute(w).match(new RegExp("^"+S+"-?"))};break;case"^":x=function(e){return e.getAttribute(w).indexOf(S)==0};break;case"$":x=function(e){return e.getAttribute(w).lastIndexOf(S)==e.getAttribute(w).length-S.length};break;case"*":x=function(e){return e.getAttribute(w).indexOf(S)>-1};break;default:x=function(e){return e.getAttribute(w)}}s=new Array;y=0;for(var b=0;b<p.length;b++){if(x(p[b])){s[y++]=p[b]}}continue}a=i;var p=new Array;var d=0;for(var v=0;v<s.length;v++){var m=s[v].getElementsByTagName(a);for(var g=0;g<m.length;g++){p[d++]=m[g]}}s=p}return s}var t=/[\t\r\n]/g;return r}();A.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",n={};A.each(e,function(e){t=A.getQueryParam(f.URL,e);if(t.length){n[e]=t}});return n},searchEngine:function(e){if(e.search("https?://(.*)google.([^/?]*)")===0){return"google"}else if(e.search("https?://(.*)bing.com")===0){return"bing"}else if(e.search("https?://(.*)yahoo.com")===0){return"yahoo"}else if(e.search("https?://(.*)duckduckgo.com")===0){return"duckduckgo"}else{return null}},searchInfo:function(e){var t=A.info.searchEngine(e),n=t!="yahoo"?"q":"p",r={};if(t!==null){r["$search_engine"]=t;var i=A.getQueryParam(e,n);if(i.length){r["mp_keyword"]=i}}return r},browser:function(e,t,n){var t=t||"";if(n){if(A.includes(e,"Mini")){return"Opera Mini"}return"Opera"}else if(/(BlackBerry|PlayBook|BB10)/i.test(e)){return"BlackBerry"}else if(A.includes(e,"FBIOS")){return"Facebook Mobile"}else if(A.includes(e,"Chrome")){return"Chrome"}else if(A.includes(e,"CriOS")){return"Chrome iOS"}else if(A.includes(t,"Apple")){if(A.includes(e,"Mobile")){return"Mobile Safari"}return"Safari"}else if(A.includes(e,"Android")){return"Android Mobile"}else if(A.includes(e,"Konqueror")){return"Konqueror"}else if(A.includes(e,"Firefox")){return"Firefox"}else if(A.includes(e,"MSIE")||A.includes(e,"Trident/")){return"Internet Explorer"}else if(A.includes(e,"Gecko")){return"Mozilla"}else{return""}},os:function(){var e=l;if(/Windows/i.test(e)){if(/Phone/.test(e)){return"Windows Mobile"}return"Windows"}else if(/(iPhone|iPad|iPod)/.test(e)){return"iOS"}else if(/Android/.test(e)){return"Android"}else if(/(BlackBerry|PlayBook|BB10)/i.test(e)){return"BlackBerry"}else if(/Mac/i.test(e)){return"Mac OS X"}else if(/Linux/.test(e)){return"Linux"}else{return""}},device:function(e){if(/iPad/.test(e)){return"iPad"}else if(/iPod/.test(e)){return"iPod Touch"}else if(/iPhone/.test(e)){return"iPhone"}else if(/(BlackBerry|PlayBook|BB10)/i.test(e)){return"BlackBerry"}else if(/Windows Phone/i.test(e)){return"Windows Phone"}else if(/Android/.test(e)){return"Android"}else{return""}},referringDomain:function(e){var t=e.split("/");if(t.length>=3){return t[2]}return""},properties:function(){return A.extend(A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(l,a.vendor,window.opera),$referrer:f.referrer,$referring_domain:A.info.referringDomain(f.referrer),$device:A.info.device(l)}),{$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web",$lib_version:N})},people_properties:function(){return A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(l,a.vendor,window.opera)})},pageviewInfo:function(e){return A.strip_empty_properties({mp_page:e,mp_referrer:f.referrer,mp_browser:A.info.browser(l,a.vendor,window.opera),mp_platform:A.info.os()})}};var D={log:function(){if(O&&!A.isUndefined(u)&&u){try{u.log.apply(u,arguments)}catch(e){A.each(arguments,function(e){u.log(e)})}}},error:function(){if(O&&!A.isUndefined(u)&&u){var e=["Mixpanel error:"].concat(A.toArray(arguments));try{u.error.apply(u,e)}catch(t){A.each(e,function(e){u.error(e)})}}},critical:function(){if(!A.isUndefined(u)&&u){var e=["Mixpanel error:"].concat(A.toArray(arguments));try{u.error.apply(u,e)}catch(t){A.each(e,function(e){u.error(e)})}}}};var P=function(){};P.prototype.create_properties=function(){};P.prototype.event_handler=function(){};P.prototype.after_track_handler=function(){};P.prototype.init=function(e){this.mp=e;return this};P.prototype.track=function(e,t,n,r){var i=this,s=A.dom_query(e);if(s.length==0){D.error("The DOM query ("+e+") returned 0 elements");return}A.each(s,function(e){A.register_event(e,this.override_event,function(e){var s={},o=i.create_properties(n,this),u=i.mp.get_config("track_links_timeout");i.event_handler(e,this,s);window.setTimeout(i.track_callback(r,o,s,true),u);i.mp.track(t,o,i.track_callback(r,o,s))})},this);return true};P.prototype.track_callback=function(e,t,n,r){r=r||false;var i=this;return function(){if(n.callback_fired){return}n.callback_fired=true;if(e&&e(r,t)===false){return}i.after_track_handler(t,n,r)}};P.prototype.create_properties=function(e,t){var n;if(typeof e==="function"){n=e(t)}else{n=A.extend({},e)}return n};var H=function(){this.override_event="click"};A.inherit(H,P);H.prototype.create_properties=function(e,t){var n=H.superclass.create_properties.apply(this,arguments);if(t.href){n["url"]=t.href}return n};H.prototype.event_handler=function(e,t,n){n.new_tab=e.which===2||e.metaKey||t.target==="_blank";n.href=t.href;if(!n.new_tab){e.preventDefault()}};H.prototype.after_track_handler=function(e,t,n){if(t.new_tab){return}setTimeout(function(){window.location=t.href},0)};var B=function(){this.override_event="submit"};A.inherit(B,P);B.prototype.event_handler=function(e,t,n){n.element=t;e.preventDefault()};B.prototype.after_track_handler=function(e,t,n){setTimeout(function(){t.element.submit()},0)};var j=function(e){this["props"]={};this.campaign_params_saved=false;if(e["cookie_name"]){this.name="mp_"+e["cookie_name"]}else{this.name="mp_"+e["token"]+"_mixpanel"}this.load();this.update_config(e);this.upgrade(e);this.save()};j.prototype.properties=function(){var e={};A.each(this["props"],function(t,n){if(!A.include(x,n)){e[n]=t}});return e};j.prototype.load=function(){if(this.disabled){return}var e=A.cookie.parse(this.name);if(e){this["props"]=A.extend({},e)}};j.prototype.upgrade=function(e){var t=e["upgrade"],n,r;if(t){n="mp_super_properties";if(typeof t==="string"){n=t}r=A.cookie.parse(n);A.cookie.remove(n);A.cookie.remove(n,true);if(r){this["props"]=A.extend(this["props"],r["all"],r["events"])}}if(!e["cookie_name"]&&e["name"]!=="mixpanel"){n="mp_"+e["token"]+"_"+e["name"];r=A.cookie.parse(n);if(r){A.cookie.remove(n);A.cookie.remove(n,true);this.register_once(r)}}};j.prototype.save=function(){if(this.disabled){return}this._expire_notification_campaigns();A.cookie.set(this.name,A.JSONEncode(this["props"]),this.expire_days,this.cross_subdomain,this.secure)};j.prototype.remove=function(){A.cookie.remove(this.name,false);A.cookie.remove(this.name,true)};j.prototype.clear=function(){this.remove();this["props"]={}};j.prototype.register_once=function(e,t,n){if(A.isObject(e)){if(typeof t==="undefined"){t="None"}this.expire_days=typeof n==="undefined"?this.default_expiry:n;A.each(e,function(e,n){if(!this["props"][n]||this["props"][n]===t){this["props"][n]=e}},this);this.save();return true}return false};j.prototype.register=function(e,t){if(A.isObject(e)){this.expire_days=typeof t==="undefined"?this.default_expiry:t;A.extend(this["props"],e);this.save();return true}return false};j.prototype.unregister=function(e){if(e in this["props"]){delete this["props"][e];this.save()}};j.prototype._expire_notification_campaigns=function(){var e=this["props"][S],t=O?60*1e3:60*60*1e3;if(!e){return}for(var n in e){if(1*new Date-e[n]>t){delete e[n]}}if(A.isEmptyObject(e)){delete this["props"][S]}};j.prototype.update_campaign_params=function(){if(!this.campaign_params_saved){this.register_once(A.info.campaignParams());this.campaign_params_saved=true}};j.prototype.update_search_keyword=function(e){this.register(A.info.searchInfo(e))};j.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:A.info.referringDomain(e)||"$direct"},"")};j.prototype.get_referrer_info=function(){return A.strip_empty_properties({$initial_referrer:this["props"]["$initial_referrer"],$initial_referring_domain:this["props"]["$initial_referring_domain"]})};j.prototype.safe_merge=function(e){A.each(this["props"],function(t,n){if(!(n in e)){e[n]=t}});return e};j.prototype.update_config=function(e){this.default_expiry=this.expire_days=e["cookie_expiration"];this.set_disabled(e["disable_cookie"]);this.set_cross_subdomain(e["cross_subdomain_cookie"]);this.set_secure(e["secure_cookie"])};j.prototype.set_disabled=function(e){this.disabled=e;if(this.disabled){this.remove()}};j.prototype.set_cross_subdomain=function(e){if(e!==this.cross_subdomain){this.cross_subdomain=e;this.remove();this.save()}};j.prototype.get_cross_subdomain=function(){return this.cross_subdomain};j.prototype.set_secure=function(e){if(e!==this.secure){this.secure=e?true:false;this.remove();this.save()}};j.prototype._add_to_people_queue=function(e,t){var n=this._get_queue_key(e),r=t[e],i=this._get_or_create_queue(m),s=this._get_or_create_queue(g),o=this._get_or_create_queue(y),u=this._get_or_create_queue(b,[]);if(n===h){A.extend(i,r);this._pop_from_people_queue(y,r)}else if(n===p){A.each(r,function(e,t){if(!(t in s)){s[t]=e}})}else if(n===d){A.each(r,function(e,t){if(t in i){i[t]+=e}else{if(!(t in o)){o[t]=0}o[t]+=e}},this)}else if(n===v){u.push(r)}D.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");D.log(t);this.save()};j.prototype._pop_from_people_queue=function(e,t){var n=this._get_queue(e);if(!A.isUndefined(n)){A.each(t,function(e,t){delete n[t]},this);this.save()}};j.prototype._get_queue_key=function(e){if(e===m){return h}else if(e===g){return p}else if(e===y){return d}else if(e===b){return v}else{D.error("Invalid queue:",e)}};j.prototype._get_queue=function(e){return this["props"][this._get_queue_key(e)]};j.prototype._get_or_create_queue=function(e,t){var n=this._get_queue_key(e),t=A.isUndefined(t)?{}:t;return this["props"][n]||(this["props"][n]=t)};var F=function(t,n,r){var i,s=r===c?e:e[r];if(s&&!A.isArray(s)){D.error("You have already initialized "+r);return}i=new I;i._init(t,n,r);i["people"]=new q;i["people"]._init(i);O=O||i.get_config("debug");if(!A.isUndefined(s)){i._execute_array.call(i["people"],s["people"]);i._execute_array(s)}return i};var I=function(){};I.prototype.init=function(t,n,r){if(typeof r==="undefined"){D.error("You must name your new library: init(token, config, name)");return}if(r===c){D.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var i=F(t,n,r);e[r]=i;i._loaded();return i};I.prototype._init=function(e,t,n){this["__loaded"]=true;this["config"]={};this.set_config(A.extend({},M,t,{name:n,token:e,callback_fn:(n===c?n:c+"."+n)+"._jsc"}));this["_jsc"]=function(){};this.__dom_loaded_queue=[];this.__request_queue=[];this.__disabled_events=[];this._flags={disable_all_events:false,identify_called:false};this["cookie"]=new j(this["config"]);this.register_once({distinct_id:A.UUID()},"")};I.prototype._loaded=function(){this.get_config("loaded")(this);if(this.get_config("track_pageview")){this.track_pageview()}};I.prototype._dom_loaded=function(){A.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this);A.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this);delete this.__dom_loaded_queue;delete this.__request_queue};I.prototype._track_dom=function(e,t){if(this.get_config("img")){D.error("You can't use DOM tracking functions with img = true.");return false}if(!_){this.__dom_loaded_queue.push([e,t]);return false}var n=(new e).init(this);return n.track.apply(n,t)};I.prototype._prepare_callback=function(e,t){if(A.isUndefined(e)){return null}if(k){var n=function(n){e(n,t)};return n}else{var r=this["_jsc"],i=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+'["'+i+'"]';r[i]=function(n){delete r[i];e(n,t)};return s}};I.prototype._send_request=function(e,t,n){if(L){this.__request_queue.push(arguments);return}var r=this.get_config("verbose");if(t["verbose"]){r=true}if(this.get_config("test")){t["test"]=1}if(r){t["verbose"]=1}if(this.get_config("img")){t["img"]=1}if(!k){if(n){t["callback"]=n}else if(r||this.get_config("test")){t["callback"]="(function(){})"}}t["ip"]=this.get_config("ip")?1:0;t["_"]=(new Date).getTime().toString();e+="?"+A.HTTPBuildQuery(t);if("img"in t){var i=f.createElement("img");i.src=e;f.body.appendChild(i)}else if(k){var s=new XMLHttpRequest;s.open("GET",e,true);s.withCredentials=true;s.onreadystatechange=function(e){if(s.readyState===4){if(s.status===200){if(n){if(r){n(A.JSONDecode(s.responseText))}else{n(Number(s.responseText))}}}else{var t="Bad HTTP status: "+s.status+" "+s.statusText;D.error(t);if(n){if(r){n({status:0,error:t})}else{n(0)}}}}};s.send(null)}else{var o=f.createElement("script");o.type="text/javascript";o.async=true;o.defer=true;o.src=e;var u=f.getElementsByTagName("script")[0];u.parentNode.insertBefore(o,u)}};I.prototype._execute_array=function(e){var t,n=[],r=[],i=[];A.each(e,function(e){if(e){t=e[0];if(typeof e==="function"){e.call(this)}else if(A.isArray(e)&&t==="alias"){n.push(e)}else if(A.isArray(e)&&t.indexOf("track")!=-1&&typeof this[t]==="function"){i.push(e)}else{r.push(e)}}},this);var s=function(e,t){A.each(e,function(e){this[e[0]].apply(this,e.slice(1))},t)};s(n,this);s(r,this);s(i,this)};I.prototype.push=function(e){this._execute_array([e])};I.prototype.disable=function(e){if(typeof e==="undefined"){this._flags.disable_all_events=true}else{this.__disabled_events=this.__disabled_events.concat(e)}};I.prototype.track=function(e,t,n){if(typeof e==="undefined"){D.error("No event name provided to mixpanel.track");return}if(A.isBlockedUA(l)||this._flags.disable_all_events||A.include(this.__disabled_events,e)){if(typeof n!=="undefined"){n(0)}return}t=t||{};t["token"]=t.token||this.get_config("token");this["cookie"].update_search_keyword(f.referrer);if(this.get_config("store_google")){this["cookie"].update_campaign_params()}if(this.get_config("save_referrer")){this["cookie"].update_referrer_info(f.referrer)}t=A.extend({},A.info.properties(),this["cookie"].properties(),t);var r={event:e,properties:t};var i=A.truncate(r,255),s=A.JSONEncode(i),o=A.base64Encode(s);D.log("MIXPANEL REQUEST:");D.log(i);this._send_request(this.get_config("api_host")+"/track/",{data:o},this._prepare_callback(n,i));return i};I.prototype.track_pageview=function(e){if(typeof e==="undefined"){e=f.location.href}this.track("mp_page_view",A.info.pageviewInfo(e))};I.prototype.track_links=function(){return this._track_dom.call(this,H,arguments)};I.prototype.track_forms=function(){return this._track_dom.call(this,B,arguments)};I.prototype.register=function(e,t){this["cookie"].register(e,t)};I.prototype.register_once=function(e,t,n){this["cookie"].register_once(e,t,n)};I.prototype.unregister=function(e){this["cookie"].unregister(e)};I.prototype._register_single=function(e,t){var n={};n[e]=t;this.register(n)};I.prototype.identify=function(e,t,n,r,i){if(e!=this.get_distinct_id()&&e!=this.get_property(E)){this.unregister(E);this._register_single("distinct_id",e)}this._check_and_handle_notifications(this.get_distinct_id());this._flags.identify_called=true;this["people"]._flush(t,n,r,i)};I.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};I.prototype.alias=function(e,t){if(e===this.get_property(w)){D.critical("Attempting to create alias for existing People user - aborting.");return-2}var n=this;if(A.isUndefined(t)){t=this.get_distinct_id()}if(e!==t){this._register_single(E,e);return this.track("$create_alias",{alias:e,distinct_id:t},function(t){n.identify(e)})}else{D.error("alias matches current distinct_id - skipping api call.");this.identify(e);return-1}};I.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)};I.prototype.set_config=function(e){if(A.isObject(e)){A.extend(this["config"],e);if(this["cookie"]){this["cookie"].update_config(this["config"])}O=O||this.get_config("debug")}};I.prototype.get_config=function(e){return this["config"][e]};I.prototype.get_property=function(e){return this["cookie"]["props"][e]};I.prototype.toString=function(){var e=this.get_config("name");if(e!==c){e=c+"."+e}return e};I.prototype._check_and_handle_notifications=function(e){if(!e||this._flags.identify_called||this.get_config("disable_notifications")){return}D.log("MIXPANEL NOTIFICATION CHECK");var t={verbose:true,version:"1",lib:"web",token:this.get_config("token"),distinct_id:e};var n=this;this._send_request(this.get_config("api_host")+"/decide/",t,this._prepare_callback(function(e){if(e["notifications"]&&e["notifications"].length>0){n._show_notification.call(n,e["notifications"][0])}}))};I.prototype._show_notification=function(e){var t=new R(e,this);t.show()};var q=function(){};q.prototype._init=function(e){this._mixpanel=e};q.prototype.set=function(e,t,n){var r={};var i={};if(A.isObject(e)){A.each(e,function(e,t){if(t=="$distinct_id"||t=="$token"){return}else{i[t]=e}});n=t}else{i[e]=t}if(this._get_config("save_referrer")){this._mixpanel.cookie.update_referrer_info(f.referrer)}i=A.extend({},A.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),i);r[m]=i;return this._send_request(r,n)};q.prototype.set_once=function(e,t,n){var r={};var i={};if(A.isObject(e)){A.each(e,function(e,t){if(t=="$distinct_id"||t=="$token"){return}else{i[t]=e}});n=t}else{i[e]=t}r[g]=i;return this._send_request(r,n)};q.prototype.increment=function(e,t,n){var r={};var i={};if(A.isObject(e)){A.each(e,function(e,t){if(t=="$distinct_id"||t=="$token"){return}else if(isNaN(parseFloat(e))){D.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else{i[t]=e}});n=t}else{if(A.isUndefined(t)){t=1}i[e]=t}r[y]=i;return this._send_request(r,n)};q.prototype.append=function(e,t,n){var r={};var i={};if(A.isObject(e)){A.each(e,function(e,t){if(t=="$distinct_id"||t=="$token"){return}else{i[t]=e}});n=t}else{i[e]=t}r[b]=i;return this._send_request(r,n)};q.prototype.track_charge=function(e,t,n){if(!A.isNumber(e)){e=parseFloat(e);if(isNaN(e)){D.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}}return this.append("$transactions",A.extend({$amount:e},t),n)};q.prototype.clear_charges=function(e){return this.set("$transactions",[],e)};q.prototype.delete_user=function(){if(!this._identify_called()){D.error("mixpanel.people.delete_user() requires you to call identify() first");return}var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)};q.prototype.toString=function(){return this._mixpanel.toString()+".people"};q.prototype._send_request=function(e,t){e["$token"]=this._get_config("token");e["$distinct_id"]=e["avant_distinct_id"]||this._mixpanel.get_distinct_id();var n=A.encodeDates(e),r=A.truncate(n,255),i=A.JSONEncode(n),s=A.base64Encode(i);if(!this._identify_called()){this._enqueue(e);if(!A.isUndefined(t)){if(this._get_config("verbose")){t({status:-1,error:null})}else{t(-1)}}return r}D.log("MIXPANEL PEOPLE REQUEST:");D.log(r);this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:s},this._mixpanel._prepare_callback(t,r));return r};q.prototype._get_config=function(e){return this._mixpanel.get_config(e)};q.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===true};q.prototype._enqueue=function(e){if(m in e){this._mixpanel.cookie._add_to_people_queue(m,e)}else if(g in e){this._mixpanel.cookie._add_to_people_queue(g,e)}else if(y in e){this._mixpanel.cookie._add_to_people_queue(y,e)}else if(b in e){this._mixpanel.cookie._add_to_people_queue(b,e)}else{D.error("Invalid call to _enqueue():",e)}};q.prototype._flush=function(e,t,n,r){var i=this,s=A.extend({},this._mixpanel.cookie._get_queue(m)),o=A.extend({},this._mixpanel.cookie._get_queue(g)),u=A.extend({},this._mixpanel.cookie._get_queue(y)),a=this._mixpanel.cookie._get_queue(b);if(!A.isUndefined(s)&&A.isObject(s)&&!A.isEmptyObject(s)){i._mixpanel.cookie._pop_from_people_queue(m,s);this.set(s,function(t,n){if(t==0){i._mixpanel.cookie._add_to_people_queue(m,s)}if(!A.isUndefined(e)){e(t,n)}})}if(!A.isUndefined(o)&&A.isObject(o)&&!A.isEmptyObject(o)){i._mixpanel.cookie._pop_from_people_queue(g,o);this.set_once(o,function(e,t){if(e==0){i._mixpanel.cookie._add_to_people_queue(g,o)}if(!A.isUndefined(r)){r(e,t)}})}if(!A.isUndefined(u)&&A.isObject(u)&&!A.isEmptyObject(u)){i._mixpanel.cookie._pop_from_people_queue(y,u);this.increment(u,function(e,n){if(e==0){i._mixpanel.cookie._add_to_people_queue(y,u)}if(!A.isUndefined(t)){t(e,n)}})}if(!A.isUndefined(a)&&A.isArray(a)&&a.length){for(var f=a.length-1;f>=0;f--){var l=a.pop();i.append(l,function(e,t){if(e==0){i._mixpanel.cookie._add_to_people_queue(b,l)}if(!A.isUndefined(n)){n(e,t)}})}i._mixpanel.cookie.save()}};I._Notification=function(e,t){A.bind_instance_methods(this);this.mixpanel=t;this.cookie=this.mixpanel["cookie"];this.campaign_id=A.escapeHTML(e["id"]);this.message_id=A.escapeHTML(e["message_id"]);this.body=(A.escapeHTML(e["body"])||"").replace(/\n/g,"<br/>");this.cta=A.escapeHTML(e["cta"])||"Close";this.dest_url=A.escapeHTML(e["cta_url"])||null;this.image_url=A.escapeHTML(e["image_url"])||null;this.notif_type=A.escapeHTML(e["type"])||"takeover";this.style=A.escapeHTML(e["style"])||"light";this.thumb_image_url=A.escapeHTML(e["thumb_image_url"])||null;this.title=A.escapeHTML(e["title"])||"";this.video_url=A.escapeHTML(e["video_url"])||null;this.video_width=R.VIDEO_WIDTH;this.video_height=R.VIDEO_HEIGHT;this.clickthrough=true;if(!this.dest_url){this.dest_url="#dismiss";this.clickthrough=false}this.mini=this.notif_type==="mini";if(!this.mini){this.notif_type="takeover"}this.notif_width=!this.mini?R.NOTIF_WIDTH:R.NOTIF_WIDTH_MINI;this._set_client_config();this.imgs_to_preload=this._init_image_html();this._init_video()};var R=I._Notification;R.ANIM_TIME=200;R.MARKUP_PREFIX="mixpanel-notification";R.BG_OPACITY=.6;R.NOTIF_TOP=25;R.NOTIF_START_TOP=200;R.NOTIF_WIDTH=388;R.NOTIF_WIDTH_MINI=420;R.NOTIF_HEIGHT_MINI=85;R.THUMB_BORDER_SIZE=5;R.THUMB_IMG_SIZE=60;R.THUMB_OFFSET=Math.round(R.THUMB_IMG_SIZE/2);R.VIDEO_WIDTH=595;R.VIDEO_HEIGHT=334;R.prototype.show=function(){var e=this;this._set_client_config();if(!this.body_el){setTimeout(function(){e.show()},300);return}this._init_styles();this._init_notification_el();this._preload_images(this._attach_and_animate)};R.prototype.dismiss=A.safewrap(function(){var e=this.showing_video?this._get_el("video"):this._get_notification_display_el();if(this.use_transitions){this._remove_class("bg","visible");this._add_class(e,"exiting");setTimeout(this._remove_notification_el,R.ANIM_TIME)}else{var t,n,r;if(this.mini){t="right";n=20;r=-100}else{t="top";n=R.NOTIF_TOP;r=R.NOTIF_START_TOP+R.NOTIF_TOP}this._animate_els([{el:this._get_el("bg"),attr:"opacity",start:R.BG_OPACITY,goal:0},{el:e,attr:"opacity",start:1,goal:0},{el:e,attr:t,start:n,goal:r}],R.ANIM_TIME,this._remove_notification_el)}});R.prototype._add_class=A.safewrap(function(e,t){t=R.MARKUP_PREFIX+"-"+t;if(typeof e==="string"){e=this._get_el(e)}if(!e.className){e.className=t}else if(!~(" "+e.className+" ").indexOf(" "+t+" ")){e.className+=" "+t}});R.prototype._remove_class=A.safewrap(function(e,t){t=R.MARKUP_PREFIX+"-"+t;if(typeof e==="string"){e=this._get_el(e)}if(e.className){e.className=(" "+e.className+" ").replace(" "+t+" ","").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}});R.prototype._animate_els=A.safewrap(function(e,t,n,r){var i=this,s=false,o,u,a=1*new Date,f;r=r||a;f=a-r;for(o=0;o<e.length;o++){u=e[o];if(typeof u.val==="undefined"){u.val=u.start}if(u.val!==u.goal){s=true;var l=u.goal-u.start,c=u.goal>=u.start?1:-1;u.val=u.start+l*f/t;if(u.attr!=="opacity"){u.val=Math.round(u.val)}if(c>0&&u.val>=u.goal||c<0&&u.val<=u.goal){u.val=u.goal}}}if(!s){if(n){n()}return}for(o=0;o<e.length;o++){u=e[o];if(u.el){var h=u.attr==="opacity"?"":"px";u.el.style[u.attr]=String(u.val)+h}}setTimeout(function(){i._animate_els(e,t,n,r)},10)});R.prototype._attach_and_animate=A.safewrap(function(){var e=this;if(this.shown||this._get_shown_campaigns()[this.campaign_id]){return}this.shown=true;this.body_el.appendChild(this.notification_el);setTimeout(function(){var t=e._get_notification_display_el();if(e.use_transitions){if(!e.mini){e._add_class("bg","visible")}e._add_class(t,"visible");e._mark_as_shown()}else{var n,r,i;if(e.mini){n="right";r=-100;i=20}else{n="top";r=R.NOTIF_START_TOP+R.NOTIF_TOP;i=R.NOTIF_TOP}e._animate_els([{el:e._get_el("bg"),attr:"opacity",start:0,goal:R.BG_OPACITY},{el:t,attr:"opacity",start:0,goal:1},{el:t,attr:n,start:r,goal:i}],R.ANIM_TIME,e._mark_as_shown)}},100);A.register_event(e._get_el("cancel"),"click",function(t){t.preventDefault();e.dismiss()});var t=e._get_el("button")||e._get_el("mini-content");A.register_event(t,"click",function(t){t.preventDefault();if(e.show_video){e._track_event("$campaign_open");e._switch_to_video()}else{e.dismiss();if(e.clickthrough){e._track_event("$campaign_open",function(){window.location.href=e.dest_url})}}})});R.prototype._get_el=function(e){return f.getElementById(R.MARKUP_PREFIX+"-"+e)};R.prototype._get_notification_display_el=function(){return this._get_el(this.notif_type)};R.prototype._get_shown_campaigns=function(){return this.cookie["props"][S]||(this.cookie["props"][S]={})};R.prototype._browser_lte=function(e,t){return this.browser_versions[e]&&this.browser_versions[e]<=t};R.prototype._init_image_html=function(){var e=[];if(!this.mini){if(this.image_url){e.push(this.image_url);this.img_html='<img id="img" src="'+this.image_url+'"/>'}else{this.img_html=""}if(this.thumb_image_url){e.push(this.thumb_image_url);this.thumb_img_html='<div id="thumbborder-wrapper"><div id="thumbborder"></div></div>'+'<img id="thumbnail"'+' src="'+this.thumb_image_url+'"'+' width="'+R.THUMB_IMG_SIZE+'"'+' height="'+R.THUMB_IMG_SIZE+'"'+"/>"+'<div id="thumbspacer"></div>'}else{this.thumb_img_html=""}}else{this.thumb_image_url=this.thumb_image_url||"//cdn.mxpnl.com/site_media/images/icons/notifications/mini-news-dark.png";e.push(this.thumb_image_url)}return e};R.prototype._init_notification_el=function(){var e="",t="",n="",r='<div id="cancel">'+'<div id="cancel-icon"></div>'+"</div>";this.notification_el=f.createElement("div");this.notification_el.id=R.MARKUP_PREFIX+"-wrapper";if(!this.mini){var i=this.clickthrough||this.show_video?"":'<div id="button-close"></div>',s=this.show_video?'<div id="button-play"></div>':"";if(this._browser_lte("ie",7)){i="";s=""}e='<div id="takeover">'+this.thumb_img_html+'<div id="mainbox">'+r+'<div id="content">'+this.img_html+'<div id="title">'+this.title+"</div>"+'<div id="body">'+this.body+"</div>"+'<div id="tagline">'+'<a href="http://mixpanel.com?from=inapp" target="_blank">POWERED BY MIXPANEL</a>'+"</div>"+"</div>"+'<div id="button">'+i+'<a id="button-link" href="'+this.dest_url+'">'+this.cta+"</a>"+s+"</div>"+"</div>"+"</div>"}else{e='<div id="mini">'+'<div id="mainbox">'+r+'<div id="mini-content">'+'<div id="mini-icon">'+'<div id="mini-icon-img"></div>'+"</div>"+'<div id="body">'+'<div id="body-text"><div>'+this.body+"</div></div>"+"</div>"+"</div>"+"</div>"+'<div id="mini-border"></div>'+"</div>"}if(this.youtube_video){t="//www.youtube.com/embed/"+this.youtube_video+"?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080";if(this.yt_custom){t+="&enablejsapi=1&html5=1&controls=0";n='<div id="video-controls">'+'<div id="video-progress" class="video-progress-el">'+'<div id="video-progress-total" class="video-progress-el"></div>'+'<div id="video-elapsed" class="video-progress-el"></div>'+"</div>"+'<div id="video-time" class="video-progress-el"></div>'+"</div>"}}else if(this.vimeo_video){t="//player.vimeo.com/video/"+this.vimeo_video+"?autoplay=1&title=0&byline=0&portrait=0"}if(this.show_video){this.video_iframe='<iframe id="'+R.MARKUP_PREFIX+'-video-frame" '+'width="'+this.video_width+'" height="'+this.video_height+'" '+' src="'+t+'"'+' frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1" scrolling="no"'+"></iframe>";n='<div id="video-'+(this.flip_animate?"":"no")+'flip">'+'<div id="video">'+'<div id="video-holder"></div>'+n+"</div>"+"</div>"}var o=n+e;if(this.flip_animate){o=(this.mini?e:"")+'<div id="flipcontainer"><div id="flipper">'+(this.mini?n:o)+"</div></div>"}this.notification_el.innerHTML=('<div id="overlay" class="'+this.notif_type+'">'+'<div id="campaignid-'+this.campaign_id+'">'+'<div id="bgwrapper">'+'<div id="bg"></div>'+o+"</div>"+"</div>"+"</div>").replace(/class=\"/g,'class="'+R.MARKUP_PREFIX+"-").replace(/id=\"/g,'id="'+R.MARKUP_PREFIX+"-")};R.prototype._init_styles=function(){if(this.style==="dark"){this.style_vals={bg:"#1d1f25",bg_actions:"#282b32",bg_hover:"#3a4147",bg_light:"#4a5157",border_gray:"#32353c",cancel_opacity:"0.4",mini_hover:"#2a3137",text_title:"#fff",text_main:"#9498a3",text_tagline:"#464851",text_hover:"#ddd"}}else{this.style_vals={bg:"#fff",bg_actions:"#e7eaee",bg_hover:"#eceff3",bg_light:"#f5f5f5",border_gray:"#e4ecf2",cancel_opacity:"1.0",mini_hover:"#fafafa",text_title:"#5c6578",text_main:"#8b949b",text_tagline:"#ced9e6",text_hover:"#7c8598"}}var e="0px 0px 35px 0px rgba(45, 49, 56, 0.7)",t=e,n=e,r=R.THUMB_IMG_SIZE+R.THUMB_BORDER_SIZE*2,i=R.ANIM_TIME/1e3+"s";if(this.mini){e="none"}var s={},o=R.NOTIF_WIDTH_MINI+20;s["@media only screen and (max-width: "+(o-1)+"px)"]={"#overlay":{display:"none"}};var u={".flipped":{transform:"rotateY(180deg)"},"#overlay":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",overflow:"auto","text-align":"center","z-index":"10000","font-family":'"Helvetica", "Arial", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},"#overlay.mini":{height:"0",overflow:"visible"},"#overlay a":{width:"initial",padding:"0","text-decoration":"none","text-transform":"none",color:"inherit"},"#bgwrapper":{position:"relative",width:"100%",height:"100%"},"#bg":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%","min-width":this.doc_width*4+"px","min-height":this.doc_height*4+"px","background-color":"black",opacity:"0.0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)",filter:"alpha(opacity=60)",transition:"opacity "+i},"#bg.visible":{opacity:R.BG_OPACITY},".mini #bg":{width:"0",height:"0","min-width":"0"},"#flipcontainer":{perspective:"1000px",position:"absolute",width:"100%"},"#flipper":{position:"relative","transform-style":"preserve-3d",transition:"0.3s"},"#takeover":{position:"absolute",left:"50%",width:R.NOTIF_WIDTH+"px","margin-left":Math.round(-R.NOTIF_WIDTH/2)+"px","backface-visibility":"hidden",transform:"rotateY(0deg)",opacity:"0.0",top:R.NOTIF_START_TOP+"px",transition:"opacity "+i+", top "+i},"#takeover.visible":{opacity:"1.0",top:R.NOTIF_TOP+"px"},"#takeover.exiting":{opacity:"0.0",top:R.NOTIF_START_TOP+"px"},"#thumbspacer":{height:R.THUMB_OFFSET+"px"},"#thumbborder-wrapper":{position:"absolute",top:-R.THUMB_BORDER_SIZE+"px",left:R.NOTIF_WIDTH/2-R.THUMB_OFFSET-R.THUMB_BORDER_SIZE+"px",width:r+"px",height:r/2+"px",overflow:"hidden"},"#thumbborder":{position:"absolute",width:r+"px",height:r+"px","border-radius":r+"px","background-color":this.style_vals.bg_actions,opacity:"0.5"},"#thumbnail":{position:"absolute",top:"0px",left:R.NOTIF_WIDTH/2-R.THUMB_OFFSET+"px",width:R.THUMB_IMG_SIZE+"px",height:R.THUMB_IMG_SIZE+"px",overflow:"hidden","z-index":"100","border-radius":R.THUMB_IMG_SIZE+"px"},"#mini":{position:"absolute",right:"20px",top:R.NOTIF_TOP+"px",width:this.notif_width+"px",height:R.NOTIF_HEIGHT_MINI*2+"px","margin-top":20-R.NOTIF_HEIGHT_MINI+"px","backface-visibility":"hidden",opacity:"0.0",transform:"rotateX(90deg)",transition:"opacity 0.3s, transform 0.3s, right 0.3s"},"#mini.visible":{opacity:"1.0",transform:"rotateX(0deg)"},"#mini.exiting":{opacity:"0.0",right:"-150px"},"#mainbox":{"border-radius":"4px","box-shadow":e,"text-align":"center","background-color":this.style_vals.bg,"font-size":"14px",color:this.style_vals.text_main},"#mini #mainbox":{height:R.NOTIF_HEIGHT_MINI+"px","margin-top":R.NOTIF_HEIGHT_MINI+"px","border-radius":"3px",transition:"background-color "+i},"#mini-border":{height:R.NOTIF_HEIGHT_MINI+6+"px",width:R.NOTIF_WIDTH_MINI+6+"px",position:"absolute",top:"-3px",left:"-3px","margin-top":R.NOTIF_HEIGHT_MINI+"px","border-radius":"6px",opacity:"0.25","background-color":"#fff","z-index":"-1","box-shadow":n},"#mini-icon":{position:"relative",display:"inline-block",width:"75px",height:R.NOTIF_HEIGHT_MINI+"px","border-radius":"3px 0 0 3px","background-color":this.style_vals.bg_actions,background:"linear-gradient(135deg, "+this.style_vals.bg_light+" 0%, "+this.style_vals.bg_actions+" 100%)",transition:"background-color "+i},"#mini:hover #mini-icon":{"background-color":this.style_vals.mini_hover},"#mini:hover #mainbox":{"background-color":this.style_vals.mini_hover},"#mini-icon-img":{position:"absolute","background-image":"url("+this.thumb_image_url+")",width:"48px",height:"48px",top:"20px",left:"12px"},"#content":{padding:"30px 20px 0px 20px"},"#mini-content":{"text-align":"left",height:R.NOTIF_HEIGHT_MINI+"px",cursor:"pointer"},"#img":{width:"328px","margin-top":"30px","border-radius":"5px"},"#title":{"max-height":"600px",overflow:"hidden","word-wrap":"break-word",padding:"25px 0px 20px 0px","font-size":"19px","font-weight":"bold",color:this.style_vals.text_title},"#body":{"max-height":"600px","margin-bottom":"25px",overflow:"hidden","word-wrap":"break-word","line-height":"21px","font-size":"15px","font-weight":"normal","text-align":"left"},"#mini #body":{display:"inline-block","max-width":"250px",margin:"0 0 0 30px",height:R.NOTIF_HEIGHT_MINI+"px","font-size":"16px","letter-spacing":"0.8px",color:this.style_vals.text_title},"#mini #body-text":{display:"table",height:R.NOTIF_HEIGHT_MINI+"px"},"#mini #body-text div":{display:"table-cell","vertical-align":"middle"},"#tagline":{"margin-bottom":"15px","font-size":"10px","font-weight":"600","letter-spacing":"0.8px",color:"#ccd7e0","text-align":"left"},"#tagline a":{color:this.style_vals.text_tagline,transition:"color "+i},"#tagline a:hover":{color:this.style_vals.text_hover},"#cancel":{position:"absolute",right:"0",width:"8px",height:"8px",padding:"10px","border-radius":"20px",margin:"12px 12px 0 0","box-sizing":"content-box",cursor:"pointer",transition:"background-color "+i},"#mini #cancel":{margin:"7px 7px 0 0"},"#cancel-icon":{width:"8px",height:"8px",overflow:"hidden","background-image":"url(//cdn.mxpnl.com/site_media/images/icons/notifications/cancel-x.png)",opacity:this.style_vals.cancel_opacity},"#cancel:hover":{"background-color":this.style_vals.bg_hover},"#button":{display:"block",height:"60px","line-height":"60px","text-align":"center","background-color":this.style_vals.bg_actions,"border-radius":"0 0 4px 4px",overflow:"hidden",cursor:"pointer",transition:"background-color "+i},"#button-close":{display:"inline-block",width:"9px",height:"60px","margin-right":"8px","vertical-align":"top","background-image":"url(//cdn.mxpnl.com/site_media/images/icons/notifications/close-x-"+this.style+".png)","background-repeat":"no-repeat","background-position":"0px 25px"},"#button-play":{display:"inline-block",width:"30px",height:"60px","margin-left":"15px","background-image":"url(//cdn.mxpnl.com/site_media/images/icons/notifications/play-"+this.style+"-small.png)","background-repeat":"no-repeat","background-position":"0px 15px"},"a#button-link":{display:"inline-block","vertical-align":"top","text-align":"center","font-size":"17px","font-weight":"bold",overflow:"hidden","word-wrap":"break-word",color:this.style_vals.text_title,transition:"color "+i},"#button:hover":{"background-color":this.style_vals.bg_hover,color:this.style_vals.text_hover},"#button:hover a":{color:this.style_vals.text_hover},"#video-noflip":{position:"relative",top:-this.video_height*2+"px"},"#video-flip":{"backface-visibility":"hidden",transform:"rotateY(180deg)"},"#video":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",top:R.NOTIF_TOP+"px","margin-top":"100px",left:"50%","margin-left":Math.round(-this.video_width/2)+"px",overflow:"hidden","border-radius":"5px","box-shadow":t,transform:"translateZ(1px)",transition:"opacity "+i+", top "+i},"#video.exiting":{opacity:"0.0",top:this.video_height+"px"},"#video-holder":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",overflow:"hidden","border-radius":"5px"},"#video-frame":{"margin-left":"-1px",width:this.video_width+"px"},"#video-controls":{opacity:"0",transition:"opacity 0.5s"},"#video:hover #video-controls":{opacity:"1.0"},"#video .video-progress-el":{position:"absolute",bottom:"0",height:"25px","border-radius":"0 0 0 5px"},"#video-progress":{width:"90%"},"#video-progress-total":{width:"100%","background-color":this.style_vals.bg,opacity:"0.7"},"#video-elapsed":{width:"0","background-color":"#6cb6f5",opacity:"0.9"},"#video #video-time":{width:"10%",right:"0","font-size":"11px","line-height":"25px",color:this.style_vals.text_main,"background-color":"#666","border-radius":"0 0 5px 0"}};if(this._browser_lte("ie",8)){A.extend(u,{"* html #overlay":{position:"absolute"},"* html #bg":{position:"absolute"},"html, body":{height:"100%"}})}if(this._browser_lte("ie",7)){A.extend(u,{"#mini #body":{display:"inline",zoom:"1",border:"1px solid "+this.style_vals.bg_hover},"#mini #body-text":{padding:"20px"},"#mini #mini-icon":{display:"none"}})}var a=["backface-visibility","border-radius","box-shadow","opacity","perspective","transform","transform-style","transition"],l=["khtml","moz","ms","o","webkit"];for(var c in u){for(var h=0;h<a.length;h++){var p=a[h];if(p in u[c]){var d=u[c][p];for(var v=0;v<l.length;v++){u[c]["-"+l[v]+"-"+p]=d}}}}var m=function(e,t){var n=function(e){var t="";for(var n in e){var r=n.replace(/#/g,"#"+R.MARKUP_PREFIX+"-").replace(/\./g,"."+R.MARKUP_PREFIX+"-");t+="\n"+r+" {";var i=e[n];for(var s in i){t+=s+":"+i[s]+";"}t+="}"}return t};var r=function(e){var t="";for(var r in e){t+="\n"+r+" {"+n(e[r])+"\n}"}return t};var i=n(e)+r(t),s=f.head||f.getElementsByTagName("head")[0]||f.documentElement,o=f.createElement("style");s.appendChild(o);o.setAttribute("type","text/css");if(o.styleSheet){o.styleSheet.cssText=i}else{o.textContent=i}};m(u,s)};R.prototype._init_video=A.safewrap(function(){if(!this.video_url){return}var e=this;e.yt_custom="postMessage"in window;var t=f.createElement("div").style,n=function(e){if(e in t){return true}e=e[0].toUpperCase()+e.slice(1);var n=["O"+e,"ms"+e,"Webkit"+e,"Moz"+e];for(var r=0;r<n.length;r++){if(n[r]in t){return true}}return false};e.dest_url=e.video_url;var r=e.video_url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i),i=e.video_url.match(/vimeo\.com\/.*?(\d+)/i);if(r){e.show_video=true;e.youtube_video=r[1];if(e.yt_custom){window["onYouTubeIframeAPIReady"]=function(){if(e._get_el("video-frame")){e._yt_video_ready()}};var s=f.createElement("script");s.src="//www.youtube.com/iframe_api";var o=f.getElementsByTagName("script")[0];o.parentNode.insertBefore(s,o)}}else if(i){e.show_video=true;e.vimeo_video=i[1]}if(e._browser_lte("ie",7)||e._browser_lte("firefox",3)){e.show_video=false;e.clickthrough=true}});R.prototype._mark_as_shown=A.safewrap(function(){var e=this;A.register_event(e._get_el("bg"),"click",function(t){e.dismiss()});var t=function(e,t){var n={};if(f.defaultView&&f.defaultView.getComputedStyle){n=f.defaultView.getComputedStyle(e,null)}else if(e.currentStyle){n=e.currentStyle}return n[t]};if(this.campaign_id){var n=this._get_el("overlay");if(n&&t(n,"visibility")!=="hidden"&&t(n,"display")!=="none"){this._get_shown_campaigns()[this.campaign_id]=1*new Date;this.cookie.save();this._track_event("$campaign_delivery");this.mixpanel["people"]["append"]({$campaigns:this.campaign_id,$notifications:{campaign_id:this.campaign_id,message_id:this.message_id,type:"web",time:new Date}})}}});R.prototype._preload_images=function(e){var t=this;if(this.imgs_to_preload.length===0){e();return}var n=0,r=[];for(var i=0;i<this.imgs_to_preload.length;i++){var s=new Image,o=function(){n++;if(n===t.imgs_to_preload.length&&e){e();e=null}};s.onload=o;s.src=this.imgs_to_preload[i];if(s.complete){o()}r.push(s)}if(this._browser_lte("ie",7)){setTimeout(function(){var t=true;for(i=0;i<r.length;i++){if(!r[i].complete){t=false}}if(t&&e){e();e=null}},500)}};R.prototype._remove_notification_el=A.safewrap(function(){window.clearInterval(this._video_progress_checker);this.notification_el.style.visibility="hidden";this.body_el.removeChild(this.notification_el)});R.prototype._set_client_config=function(){var e=function(e){var t=a.userAgent.match(e);return t&&t[1]};this.browser_versions={};this.browser_versions["chrome"]=e(/Chrome\/(\d+)/);this.browser_versions["firefox"]=e(/Firefox\/(\d+)/);this.browser_versions["ie"]=e(/MSIE (\d+).+/);if(!this.browser_versions["ie"]&&!window.ActiveXObject&&"ActiveXObject"in window){this.browser_versions["ie"]=11}this.body_el=f.body||f.getElementsByTagName("body")[0];if(this.body_el){this.doc_width=Math.max(this.body_el.scrollWidth,f.documentElement.scrollWidth,this.body_el.offsetWidth,f.documentElement.offsetWidth,this.body_el.clientWidth,f.documentElement.clientWidth);this.doc_height=Math.max(this.body_el.scrollHeight,f.documentElement.scrollHeight,this.body_el.offsetHeight,f.documentElement.offsetHeight,this.body_el.clientHeight,f.documentElement.clientHeight)}var t=this.browser_versions["ie"];var n=f.createElement("div").style,r=function(e){if(e in n){return true}if(!t){e=e[0].toUpperCase()+e.slice(1);var r=["O"+e,"Webkit"+e,"Moz"+e];for(var i=0;i<r.length;i++){if(r[i]in n){return true}}}return false};this.use_transitions=this.body_el&&r("transition")&&r("transform");this.flip_animate=(this.browser_versions["chrome"]>=33||this.browser_versions["firefox"]>=15)&&this.body_el&&r("backfaceVisibility")&&r("perspective")&&r("transform")};R.prototype._switch_to_video=A.safewrap(function(){var e=this,t=[{el:e._get_notification_display_el(),attr:"opacity",start:1,goal:0},{el:e._get_notification_display_el(),attr:"top",start:R.NOTIF_TOP,goal:-500},{el:e._get_el("video-noflip"),attr:"opacity",start:0,goal:1},{el:e._get_el("video-noflip"),attr:"top",start:-e.video_height*2,goal:0}];if(e.mini){var n=e._get_el("bg"),r=e._get_el("overlay");n.style.width="100%";n.style.height="100%";r.style.width="100%";e._add_class(e._get_notification_display_el(),"exiting");e._add_class(n,"visible");t.push({el:e._get_el("bg"),attr:"opacity",start:0,goal:R.BG_OPACITY})}var i=e._get_el("video-holder");i.innerHTML=e.video_iframe;var s=function(){if(window["YT"]&&window["YT"]["loaded"]){e._yt_video_ready()}e.showing_video=true;e._get_notification_display_el().style.visibility="hidden"};if(e.flip_animate){e._add_class("flipper","flipped");setTimeout(s,R.ANIM_TIME)}else{e._animate_els(t,R.ANIM_TIME,s)}});R.prototype._track_event=function(e,t){if(this.campaign_id){this.mixpanel["track"](e,{campaign_id:this.campaign_id,message_id:this.message_id,message_type:"web_inapp",message_subtype:this.notif_type},t)}else{t&&t.call()}};R.prototype._yt_video_ready=A.safewrap(function(){var e=this;if(e.video_inited){return}e.video_inited=true;var t=e._get_el("video-elapsed"),n=e._get_el("video-time"),r=e._get_el("video-progress");new window["YT"]["Player"](R.MARKUP_PREFIX+"-video-frame",{events:{onReady:function(i){var s=i["target"],o=s["getDuration"](),u=function(e){return("00"+e).slice(-2)},a=function(e){var t=Math.round(o-e),r=Math.floor(t/60),i=Math.floor(r/60);t-=r*60;r-=i*60;n.innerHTML="-"+(i?i+":":"")+u(r)+":"+u(t)};a(0);e._video_progress_checker=window.setInterval(function(){var e=s["getCurrentTime"]();t.style.width=e/o*100+"%";a(e)},250);A.register_event(r,"click",function(e){var t=Math.max(0,e.pageX-r.getBoundingClientRect().left);s["seekTo"](o*t/r.clientWidth,true)})}}})});A["toArray"]=A.toArray;A["isObject"]=A.isObject;A["JSONEncode"]=A.JSONEncode;A["JSONDecode"]=A.JSONDecode;A["isBlockedUA"]=A.isBlockedUA;A["isEmptyObject"]=A.isEmptyObject;A["info"]=A.info;A["info"]["device"]=A.info.device;A["info"]["browser"]=A.info.browser;I.prototype["init"]=I.prototype.init;I.prototype["disable"]=I.prototype.disable;I.prototype["track"]=I.prototype.track;I.prototype["track_links"]=I.prototype.track_links;I.prototype["track_forms"]=I.prototype.track_forms;I.prototype["track_pageview"]=I.prototype.track_pageview;I.prototype["register"]=I.prototype.register;I.prototype["register_once"]=I.prototype.register_once;I.prototype["unregister"]=I.prototype.unregister;I.prototype["identify"]=I.prototype.identify;I.prototype["alias"]=I.prototype.alias;I.prototype["name_tag"]=I.prototype.name_tag;I.prototype["set_config"]=I.prototype.set_config;I.prototype["get_config"]=I.prototype.get_config;I.prototype["get_property"]=I.prototype.get_property;I.prototype["get_distinct_id"]=I.prototype.get_distinct_id;I.prototype["toString"]=I.prototype.toString;I.prototype["_check_and_handle_notifications"]=I.prototype._check_and_handle_notifications;I.prototype["_show_notification"]=I.prototype._show_notification;j.prototype["properties"]=j.prototype.properties;j.prototype["update_search_keyword"]=j.prototype.update_search_keyword;j.prototype["update_referrer_info"]=j.prototype.update_referrer_info;j.prototype["get_cross_subdomain"]=j.prototype.get_cross_subdomain;j.prototype["clear"]=j.prototype.clear;q.prototype["set"]=q.prototype.set;q.prototype["set_once"]=q.prototype.set_once;q.prototype["increment"]=q.prototype.increment;q.prototype["append"]=q.prototype.append;q.prototype["track_charge"]=q.prototype.track_charge;q.prototype["clear_charges"]=q.prototype.clear_charges;q.prototype["delete_user"]=q.prototype.delete_user;q.prototype["toString"]=q.prototype.toString;A.safewrap_class(j,["_expire_notification_campaigns"]);A.safewrap_class(I,["identify","_check_and_handle_notifications","_show_notification"]);if(A.isUndefined(e)){D.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");return}if(e["__loaded"]||e["config"]&&e["cookie"]){D.error("Mixpanel library has already been downloaded at least once.");return}if(C<1.1){D.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");return}var U={};A.each(e["_i"],function(e){var t,n;if(e&&A.isArray(e)){t=e[e.length-1];n=F.apply(this,e);U[t]=n}});var z=function(){A.each(U,function(t,n){if(n!==c){e[n]=t}});e["_"]=A};e["init"]=function(t,n,r){if(r){if(!e[r]){e[r]=U[r]=F(t,n,r);e[r]._loaded()}}else{var i=e;if(U[c]){i=U[c]}else if(t){i=F(t,n,c);i._loaded()}window[c]=e=i;z()}};e["init"]();A.each(U,function(e){e._loaded()});if(f.addEventListener){if(f.readyState=="complete"){W()}else{f.addEventListener("DOMContentLoaded",W,false)}}else if(f.attachEvent){f.attachEvent("onreadystatechange",W);var X=false;try{X=window.frameElement==null}catch(V){}if(f.documentElement.doScroll&&X){function $(){try{f.documentElement.doScroll("left")}catch(e){setTimeout($,1);return}W()}$()}}A.register_event(window,"load",W,true)})(window["mixpanel"])
